<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head">
    <style>
        body { min-height: auto !important; height: auto !important; overflow: visible !important; display: block !important; }
        .main-content { flex: none !important; flex-grow: 0 !important; flex-shrink: 0 !important; flex-basis: auto !important; min-height: auto !important; height: auto !important; overflow: visible !important; }
        .container { min-height: auto !important; height: auto !important; overflow: visible !important; }
        .form-container { overflow: visible !important; max-height: none !important; height: auto !important; }
        .form-section { overflow: visible !important; }
    </style>
</head>
<body style="min-height: auto !important; height: auto !important; overflow: visible !important; display: block !important;">
<header th:replace="fragments :: header"></header>
<div class="main-content" style="min-height: auto !important; height: auto !important; overflow: visible !important; flex: none !important; flex-grow: 0 !important; flex-shrink: 0 !important; flex-basis: auto !important;">
<div class="container main-container" style="min-height: auto !important; height: auto !important; overflow: visible !important;">
    <div class="page-header fade-in">
        <div class="d-flex align-items-center">
            <i class="fas fa-user-edit me-3" style="font-size: 2.5rem; color: var(--secondary-color);"></i>
            <div>
                <h1 class="text-gradient mb-0" style="font-size: 2.2rem;">Edit Supplier</h1>
                <p class="text-muted mb-0" style="font-size: 1.1rem;">Update supplier driver information and vehicle assignment</p>
            </div>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Test Before Form -->
            <div style="background: green; color: white; padding: 15px; margin: 15px 0; text-align: center; font-weight: bold;">
                TEST: Page is loading - this should be visible
            </div>
            <div class="form-container fade-in" style="overflow: visible !important; max-height: none !important; height: auto !important;">
                <!-- TEST BEFORE FORM -->
                <div style="background: orange; color: white; padding: 15px; margin: 15px 0; text-align: center; font-weight: bold;">
                    TEST: About to start form - this should be visible
                </div>
                
                <form action="#" th:action="@{/suppliers/update/{id}(id=${id})}" th:object="${supplier}" th:method="patch">
                    <!-- TEST INSIDE FORM -->
                    <div style="background: cyan; color: black; padding: 15px; margin: 15px 0; text-align: center; font-weight: bold;">
                        TEST: Inside form - this should be visible
                    </div>
                    
                    <!-- TEST SIMPLE FORM -->
                    <div style="background: pink; color: black; padding: 15px; margin: 15px 0; text-align: center; font-weight: bold;">
                        TEST: About to add form fields - this should be visible
                    </div>
                    
                    <!-- Simple Test Field -->
                    <div class="form-group">
                        <label for="testField" class="form-label">Test Field</label>
                        <input class="form-control" type="text" id="testField" placeholder="Test input">
                    </div>
                    
                    <!-- TEST AFTER SIMPLE FIELD -->
                    <div style="background: lime; color: black; padding: 15px; margin: 15px 0; text-align: center; font-weight: bold;">
                        TEST: After simple field - this should be visible
                    </div>

                    <!-- Employee Details Section -->
                    <div class="form-section mb-4">
                        <div class="section-title">
                            <i class="fas fa-id-badge me-2"></i>Employee Details
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="egn" class="form-label">
                                        <i class="fas fa-id-card me-2"></i>EGN
                                    </label>
                                    <input class="form-control" type="text" th:field="*{egn}" 
                                           placeholder="Enter EGN" id="egn" required>
                                    <span class="text-danger" th:if="${#fields.hasErrors('egn')}" 
                                          th:errors="*{egn}">EGN is required</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="employeeId" class="form-label">
                                        <i class="fas fa-id-badge me-2"></i>Employee ID
                                    </label>
                                    <input class="form-control" type="text" th:field="*{employeeId}" 
                                           placeholder="Enter employee ID" id="employeeId" required>
                                    <span class="text-danger" th:if="${#fields.hasErrors('employeeId')}" 
                                          th:errors="*{employeeId}">Employee ID is required</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="salary" class="form-label">
                                        <i class="fas fa-euro-sign me-2"></i>Salary
                                    </label>
                                    <input class="form-control" type="number" th:field="*{salary}" 
                                           placeholder="Enter salary amount" id="salary" required>
                                    <span class="text-danger" th:if="${#fields.hasErrors('salary')}" 
                                          th:errors="*{salary}">Salary is required</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="dateOfEmploy" class="form-label">
                                        <i class="fas fa-calendar-alt me-2"></i>Date of Employment
                                    </label>
                                    <input class="form-control" type="date" th:field="*{dateOfEmploy}"
                                           id="dateOfEmploy" required>
                                    <span class="text-danger" th:if="${#fields.hasErrors('dateOfEmploy')}" 
                                          th:errors="*{dateOfEmploy}">Date of employment is required</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Vehicle & License Section -->
                    <div class="form-section mb-4">
                        <div class="section-title">
                            <i class="fas fa-car me-2"></i>Vehicle & License Assignment
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="vehicleId" class="form-label">
                                        <i class="fas fa-truck me-2"></i>Assigned Vehicle
                                    </label>
                                    <select class="form-control" name="vehicleId" id="vehicleId">
                                        <option value="">Select a vehicle...</option>
                                        <option th:each="vehicle : ${vehicles}"
                                                th:value="${vehicle.vehicleId}"
                                                th:text="'Vehicle #' + ${vehicle.vehicleId}">
                                        </option>
                                    </select>
                                    <span class="text-danger" th:if="${#fields.hasErrors('vehicleId')}" 
                                          th:errors="*{vehicleId}">Vehicle assignment is required</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="drivingLicenseCategories" class="form-label">
                                        <i class="fas fa-id-badge me-2"></i>Driving License Categories
                                    </label>
                                    <select class="form-control" id="drivingLicenseCategories" 
                                            name="drivingLicenseCategories" multiple="multiple" size="4">
                                        <option th:each="drivingLicenseCategory : ${drivingLicenseCategories}"
                                                th:text="${drivingLicenseCategory}"
                                                th:value="${drivingLicenseCategory}">
                                        </option>
                                    </select>
                                    <small class="form-text text-muted">
                                        <i class="fas fa-info-circle me-1"></i>
                                        Hold Ctrl (or Cmd on Mac) to select multiple categories
                                    </small>
                                    <span class="text-danger" th:if="${#fields.hasErrors('drivingLicenseCategories')}" 
                                          th:errors="*{drivingLicenseCategories}">Driving license categories are required</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- TEST SECTION - This should be visible -->
                    <div style="background: red; color: white; padding: 20px; margin: 20px 0; text-align: center; font-size: 20px; font-weight: bold; border: 3px solid black;">
                        TEST: This red box should be visible after Vehicle & License section
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions mt-4 pt-4 border-top">
                        <div class="d-flex justify-content-end gap-3">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-save me-2"></i>Update Supplier
                            </button>
                            <a href="/suppliers" class="btn btn-secondary btn-lg">
                                <i class="fas fa-times me-2"></i>Cancel
                            </a>
                        </div>
                    </div>
                    
                    <!-- Test Content -->
                    <div style="background: yellow; padding: 20px; margin: 20px 0; text-align: center; font-size: 18px; font-weight: bold;">
                        TEST: If you can see this yellow box, the form is rendering completely
                    </div>
                </form>
                
                <!-- TEST AFTER FORM - This should be visible -->
                <div style="background: blue; color: white; padding: 20px; margin: 20px 0; text-align: center; font-size: 20px; font-weight: bold; border: 3px solid yellow;">
                    TEST: This blue box should be visible after the form closes
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<!-- TEST OUTSIDE CONTAINER - This should be visible -->
<div style="background: purple; color: white; padding: 20px; margin: 20px 0; text-align: center; font-size: 20px; font-weight: bold; border: 3px solid orange;">
    TEST: This purple box should be visible outside the main container
</div>
<footer th:replace="fragments :: footer"></footer>
</body>
</html>